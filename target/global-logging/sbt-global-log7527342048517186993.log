[0m[[0m[0mdebug[0m] [0m[0m> Exec(collectAnalyses, None, Some(CommandSource(network-1)))[0m[0J
[0m[[0m[0mdebug[0m] [0m[0mUnhandled notification received: initialized: JsonRpcNotificationMessage(2.0, initialized, {})[0m[0J
[0m[[0m[0mdebug[0m] [0m[0mUnhandled notification received: textDocument/didOpen: JsonRpcNotificationMessage(2.0, textDocument/didOpen, {"textDocument":{"uri":"file:///Users/dmukherjee/UIUC/SandiaTrack/ActorTrackAndDetect/akka-cluster/src/main/scala/sample/cluster/stats/App.scala","languageId":"scala","version":1,"text":"package sample.cluster.stats\n\nimport akka.actor.typed.ActorSystem\nimport akka.actor.typed.Behavior\nimport akka.actor.typed.receptionist.Receptionist\nimport akka.actor.typed.receptionist.ServiceKey\nimport akka.actor.typed.scaladsl.Behaviors\nimport akka.actor.typed.scaladsl.Routers\nimport akka.cluster.typed.Cluster\nimport com.typesafe.config.ConfigFactory\n\nobject App {\n\n  val StatsServiceKey = ServiceKey[StatsService.ProcessText](\"StatsService\")\n\n  private object RootBehavior {\n    def apply(): Behavior[Nothing] = Behaviors.setup[Nothing] { ctx =>\n      val cluster = Cluster(ctx.system)\n      if (cluster.selfMember.hasRole(\"compute\")) {\n        // on every compute node there is one service instance that delegates to N local workers\n        val numberOfWorkers =\n          ctx.system.settings.config.getInt(\"stats-service.workers-per-node\")\n        val workers = ctx\n          .spawn(\n            Routers\n              .pool(numberOfWorkers)(StatsWorker().narrow[StatsWorker.Process])\n              // the worker has a per word cache, so send the same word to the same local worker child\n              .withConsistentHashingRouting(1, _.word),\n            \"WorkerRouter\"\n          )\n        val service = ctx.spawn(StatsService(workers), \"StatsService\")\n\n        // published through the receptionist to the other nodes in the cluster\n        ctx.system.receptionist ! Receptionist\n          .Register(StatsServiceKey, service)\n      }\n      if (cluster.selfMember.hasRole(\"client\")) {\n        val serviceRouter =\n          ctx.spawn(Routers.group(App.StatsServiceKey), \"ServiceRouter\")\n        ctx.spawn(StatsClient(serviceRouter), \"Client\")\n      }\n      Behaviors.empty[Nothing]\n    }\n  }\n\n  def main(args: Array[String]): Unit = {\n    if (args.isEmpty) {\n      startup(\"compute\", 25251)\n      startup(\"compute\", 25252)\n      startup(\"compute\", 0)\n      startup(\"client\", 0)\n    } else {\n      require(args.length == 2, \"Usage: role port\")\n      startup(args(0), args(1).toInt)\n    }\n  }\n\n  private def startup(role: String, port: Int): Unit = {\n\n    // Override the configuration of the port when specified as program argument\n    val config = ConfigFactory\n      .parseString(s\"\"\"\n      akka.remote.artery.canonical.port=$port\n      akka.cluster.roles = [$role]\n      \"\"\")\n      .withFallback(ConfigFactory.load(\"stats\"))\n\n    ActorSystem[Nothing](RootBehavior(), \"ClusterSystem\", config)\n  }\n}\n"}})[0m[0J
[0m[[0m[0mdebug[0m] [0m[0mUnhandled notification received: textDocument/didOpen: JsonRpcNotificationMessage(2.0, textDocument/didOpen, {"textDocument":{"uri":"file:///Users/dmukherjee/UIUC/SandiaTrack/ActorTrackAndDetect/akka-cluster/src/main/scala/sample/cluster/actordetrack/App.scala","languageId":"scala","version":1,"text":"package sample.cluster.actordetrack\n\nimport akka.actor.typed.ActorSystem\nimport akka.actor.typed.Behavior\nimport akka.actor.typed.receptionist.Receptionist\nimport akka.actor.typed.receptionist.ServiceKey\nimport akka.actor.typed.scaladsl.Behaviors\nimport akka.actor.typed.scaladsl.Routers\nimport akka.cluster.typed.Cluster\nimport com.typesafe.config.ConfigFactory\n\nobject App {\n\n  val DroneServiceKey = ServiceKey[DroneService](\"DroneService\")\n\n  final case class DroneService(replyTo: ActorRef[MyDrone.Event])\n  \n  private object Drone{\n    def apply(): Behavior[Nothing] = Behavior.setup[Nothing]{ ctx =>\n      val cluster = Cluster(ctx.system)\n      if (cluster.selfMember.hasRole(\"Drone\")){\n        val serviceRouter =\n          ctx.spawn(Routers.group(App.StatsServiceKey), \"ServiceRouter\")\n        ctx.spawn(StatsClient(serviceRouter), \"Client\")\n      }\n      if(cluster.selfMember.hasRole(\"DroneManager\")){\n        // Look at all the drone that are joining\n      }\n      Behaviors.empty[Nothing]\n\n    }\n  }\n\n  def main(args: Array[String]): Unit = {\n      startup(\"Drone\", 25001)\n      startup(\"Drone\", 25002)\n      startup(\"Drone\", 25003)\n      // startup(\"DroneManager\", 0)\n  }\n  private def startup(role:String, port: Int): Unit ={\n     val config = ConfigFactory\n      .parseString(s\"\"\"\n      akka.remote.artery.canonical.port=$port\n      akka.cluster.roles = [$role]\n      \"\"\")\n      .withFallback(ConfigFactory.load(\"drone\"))\n    \n      ActorSystem[Nothing](Drone(), \"ClusterSystem\", config)\n  }\n}\n"}})[0m[0J
[0m[[0m[0mdebug[0m] [0m[0mjsonRpcNotify: JsonRpcNotificationMessage(2.0, build/logMessage, {"type":4,"message":"Processing"})[0m[0J
[0m[[0m[0mdebug[0m] [0m[0mEvaluating tasks: Compile / collectAnalyses[0m[0J
[0m[[0m[0mdebug[0m] [0m[0mRunning task... Cancel: Signal, check cycles: false, forcegc: true[0m[0J
[0m[[0m[0mdebug[0m] [0m[0manalysis location (/Users/dmukherjee/UIUC/SandiaTrack/ActorTrackAndDetect/target/scala-2.12/zinc/inc_compile_2.12.zip,true)[0m[0J
[0m[[0m[32msuccess[0m] [0m[0mTotal time: 0 s, completed Oct 29, 2023 2:27:02 PM[0m[0J
[0m[[0m[0mdebug[0m] [0m[0mjsonRpcNotify: JsonRpcNotificationMessage(2.0, build/logMessage, {"type":4,"message":"Done"})[0m[0J
[0m[[0m[0mdebug[0m] [0m[0m> Exec(shell, None, None)[0m[0J
[0m[[0m[0mdebug[0m] [0m[0mForcing garbage collection...[0m[0J
[0m[[0m[0mdebug[0m] [0m[0mUnhandled request received: shutdown: JsonRpcRequestMessage(2.0, â™¨1, shutdown, null})[0m[0J
